% !TeX encoding = UTF-8
% !TeX spellcheck = fr_CA

% ajout de l'option nohyperref pour charger le package manuellement 
% voir https://gitlab.com/vigou3/ulthese/issues/2
\documentclass[PhD,nohyperref,english,french]{ulthese}
%% ===================== packages ============================================
\ifxetex\else \usepackage[utf8]{inputenc} \fi
\usepackage{amsmath,amsfonts,amssymb,mathtools,siunitx,etoolbox}
\usepackage{hyperref} % dernier package chargé sauf glossaries
\usepackage[noredefwarn]{glossaries} % aucun warning remplacement theglossary memoir
\usepackage{glosnomtools}
%% ===================== preamble ============================================
%% ------------- glossaries ---------------------------------
\makeglossaries
\setglossarystyle{nomencl_french}
\setacronymstyle{long-short-modfr}
\loadglsentries{ex_glosnomtools_glos}
\glssetwidest{LOOP}  % nomenclature widest name
%% ------------- ulthese ------------------------------------
\titre{Exemple d'une nomenclature mathématique avec \texttt{glossaries} et \texttt{glossnomtools} dans la classe \texttt{ulthese}}
\auteur{Francis Gagnon}
\programme{Doctorat en génie électrique}
\annee{2018}
%% ============================================================================

\begin{document}

\frontmatter                    % pages liminaires

\pagetitre

\begin{SingleSpace}
\abnormalparskip{0pt}
\printglossary[title=Nomenclature]
\end{SingleSpace}
\cleardoublepage

\mainmatter                     % corps du document

\chapter{Exemple d'utilisation}

\section{Compilation}
La compilation de ce document ce fait en exécutant les commandes dans l'ordre suivante :
\begin{enumerate}
	\item \texttt{pdflatex}
	\item \texttt{makeglossaries}
	\item \texttt{pdflatex}
\end{enumerate}
La commande \texttt{makeglossaries} est directement accessible dans les menu de TeXstudio ou avec \texttt{F9}. Pour un autre éditeur, il faut ajouter une commande personnalisée. Par exemple, dans TexMaker c’est accessible dans le menu \texttt{Utilisateur > Commandes Utilisateur > Éditer Commandes Utilisateur}:
\begin{itemize}
	\item \texttt{Item menu : glossaries} 
	\item \texttt{Commande : makeglossaries \%}
\end{itemize}
Sous Windows avec MiKTeX, il est possible que le script \texttt{makeglossaries} nécessite une installation de Perl (voir \url{https://tinyurl.com/ybnoyqjp}). Une fois Perl installé, il faut exécuter le script \texttt{perltex.exe} disponible dans le dossier où MiKTeX est installé.

\section{Symboles, indices et accentuation}
L'insertion d'un symbole mathématique simple avec hyperlien se fait avec la macro \texttt{gls} de glossaries : \gls{k}, \gls{mat.A} et \gls{mat.b}. C'est la même chose pour les abréviations : \gls{LOOP}. 

La macro \texttt{glsub} permet d'ajouter une indice : \glsub{d}{v}, \glsub{z}{v}, \glsub{T}{v}, \glsub{D}{a}, \glsub{rho}{w} et \glsub{mu}{v}. Les macros peuvent s'utiliser autant en mode \texttt{text} qu'en mode \texttt{math} avec \texttt{\$\$}. Par contre, je préfère personnellement écrire les symboles de manière explicite dans une équation (pas d'hyperlien):
\begin{equation}
d"v + \glsub{d}{v} = \SI{10.0}{\centi\meter} = 3.937\qtmark
\end{equation}
Dans le standard ISO, les indices représentant l'abbréviation d'un mot s'écrivent sans italique, et, celles représentant une variable, en italique. En mode \texttt{math}, j'ai configuré le caractère \texttt{<">} comme raccourci pour l'écriture d'une indice sans italique (\texttt{<\_>} pour une indice en italique, et \texttt{qtmark} pour insérer le caractère \texttt{<">}). La macro \texttt{glsvi} permet d'ajouter une variable en indice à une autre variable (les deux en italique) : la température \gls{T} au temps discret \gls{k} noté \glsvi{T}{k}. Il est aussi possible d'ajouter deux indices séparées par une virgule avec \glsubs{D}{w}{a}. En l’occurrence, l'opérateur virgule est ajouté dans la nomenclature, qui doit donc être défini dans le glossaire sous le label \texttt{op.comma}.

Il est aussi possible d'ajouter des accentuations avec \texttt{glsac}: le débit massique 
\glsac[dot]{m}. Les accents permis sont:
\begin{itemize} 
	\item \texttt{dot} (label glossaire \texttt{op.dot})
	\item \texttt{bar} (label glossaire \texttt{op.bar})
	\item \texttt{hat} (label glossaire \texttt{op.hat})
	\item \texttt{tilde} (label glossaire \texttt{op.tilde})
\end{itemize}
À leur utilisation respective, un opérateur est ajouté dans la nomenclature. Ils doivent donc être définis à leur label respectif. Un argument optionnel permet d'ajouter des accents à toutes macros précédentes : \glsub[bar]{T}{v}, \glsubs[dot]{m}{v}{a}, \glsvi[][dot]{T}{m} et \glsvi[dot]{m}{k}.



\end{document}
